import './polyfills.server.mjs';
import{a as P,b as g,c as x,d as F,e as O,f as T,g as w,h as M,i as E,j as $}from"./chunk-QM2S3XBZ.mjs";import{$ as y,Ba as _,H as d,I as h,O as c,P as b,R as u,V as r,W as a,X as s,b as v,ba as l,ea as f,h as S,k as C,o as p}from"./chunk-PC64KVDR.mjs";var j=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=p({type:e,selectors:[["app-loader"]],standalone:!0,features:[f],decls:3,vars:0,consts:[[1,"loader-wrapper"],[1,"loader"],[1,"loader-inner"]],template:function(i,n){i&1&&(r(0,"div",0)(1,"div",1),s(2,"span",2),a()())},styles:[".loader-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;background-color:#33323360;display:flex;justify-content:center;align-items:center;inset:0}.loader[_ngcontent-%COMP%]{display:inline-block;width:30px;height:30px;position:relative;border:4px solid #fff;animation:_ngcontent-%COMP%_loader 3s infinite ease}.loader-inner[_ngcontent-%COMP%]{vertical-align:top;display:inline-block;width:100%;background-color:var(--primary);animation:_ngcontent-%COMP%_loader-inner 3s infinite ease-in}@keyframes _ngcontent-%COMP%_loader{0%{transform:rotate(0)}25%{transform:rotate(180deg)}50%{transform:rotate(180deg)}75%{transform:rotate(360deg)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_loader-inner{0%{height:0%}25%{height:0%}50%{height:100%}75%{height:100%}to{height:0%}}"]});let o=e;return o})();var I="https://jsonplaceholder.typicode.com/",m={POSTS:{posts:"posts"}};var G=(()=>{let e=class e{constructor(t){this.http=t,this.posts=new v([]),this.currentPost=this.posts.asObservable(),this.base_url=I}getAllPost(){this.http.get(`${this.base_url}${m.POSTS.posts}`).subscribe(t=>{this.posts.next(t)})}createPost(t){return this.http.post(`${this.base_url}${m.POSTS.posts}`,t)}updatePost(t){return this.http.put(`${this.base_url}${m.POSTS.posts}/${t.id}`,t)}deletePost(t){return this.http.get(`${this.base_url}${m.POSTS.posts}/${t}`)}updatePostGlobal(t){t.userId=1;let i;this.currentPost.subscribe(n=>{i=[...n,t]}),this.posts.next(i)}};e.\u0275fac=function(i){return new(i||e)(C(_))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();function D(o,e){o&1&&s(0,"app-loader",0)}function B(o,e){o&1&&(r(0,"h2"),l(1,"Posts"),a())}function V(o,e){o&1&&(r(0,"p"),l(1,"Update post"),a())}function q(o,e){o&1&&(r(0,"p"),l(1,"Create post"),a())}var X=(()=>{let e=class e{constructor(t,i){this.dashboardService=t,this.formBuilder=i,this.postForm=new O({}),this.loading=!1}ngOnInit(){this.initForm()}initForm(){this.postForm=this.formBuilder.group({title:[this.item?.title,g.required],body:[this.item?.body,g.required]})}onSubmit(t){let i=t.value;this.item&&this.item?.id?this.updatePost(this.item):this.createPost(i)}updatePost(t){this.loading=!0,this.dashboardService.updatePost(t).subscribe(i=>{i&&(this.loading=!1)})}createPost(t){this.loading=!0,this.dashboardService.createPost(t).subscribe(i=>{console.info(i),this.dashboardService.updatePostGlobal(i),this.loading=!1})}};e.\u0275fac=function(i){return new(i||e)(h(G),h(E))},e.\u0275cmp=p({type:e,selectors:[["app-create"]],inputs:{item:"item"},standalone:!0,features:[f],decls:20,vars:5,consts:[[1,""],[1,"w-full","max-w-lg"],[3,"ngSubmit","formGroup"],[1,"mb-8"],["for","title",1,"block","text-gray-700","text-sm","font-normal","mb-2"],["formControlName","title","id","title","type","text","placeholder","Enter title"],["for","body",1,"block","text-gray-700","text-sm","font-normal","mb-2"],["formControlName","body","id","body","type","text","placeholder","Enter body","rows","5"],["type","submit",3,"disabled"],[1,"flex"]],template:function(i,n){i&1&&(c(0,D,1,0,"app-loader",0),r(1,"div")(2,"div")(3,"div",1),c(4,B,2,0,"h2"),s(5,"div"),r(6,"form",2),y("ngSubmit",function(){return n.onSubmit(n.postForm)}),r(7,"div",3)(8,"label",4),l(9," Title "),a(),s(10,"input",5),a(),r(11,"div",3)(12,"label",6),l(13," Body "),a(),s(14,"textarea",7),a(),r(15,"div")(16,"button",8)(17,"div",9),c(18,V,2,0,"p")(19,q,2,0),a()()()()()()()),i&2&&(u(0,n.loading?0:-1),d(4),u(4,n.item!=null&&n.item.id?-1:4),d(2),b("formGroup",n.postForm),d(10),b("disabled",n.postForm.invalid),d(2),u(18,n.item!=null&&n.item.id?18:19))},dependencies:[$,T,P,x,F,w,M,j]});let o=e;return o})();export{G as a,X as b};
